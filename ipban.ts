import {exec} from "child_process";

type IP = `${number}\.${number}\.${number}\.${number}`;
const ips: Set<IP> = new Set<IP>([
	"161.35.207.208", "45.146.164.110", "207.102.138.19", "87.251.67.40", "91.132.58.33", "186.125.122.251",
	"185.53.90.24", "185.142.236.35", "61.219.11.151", "61.242.54.235", "13.65.151.20", "18.170.99.22", "212.192.219.122",
	"34.96.130.14", "93.186.199.10", "116.226.68.28", "27.45.39.139", "58.255.209.108", "123.5.118.104", "66.240.205.34",
	"80.82.77.33", "34.142.74.177", "103.153.76.176", "87.121.52.88", "116.68.100.125", "185.142.236.36", "2.182.154.40",
	"89.248.168.196", "104.244.75.62", "209.141.51.176", "205.185.120.71", "205.185.115.123", "222.186.31.103",
	"110.177.176.60", "147.182.223.148", "209.141.60.98", "137.184.107.196", "137.184.27.255", "137.184.99.240",
]);

for (const ip of ips) {
	exec(`ipset add banip ${ip}`, (_, __, stderr) => {
		if (stderr.includes("already added")) {
			return;
		}
		console.error(`${ip} 添加失败`, _);
	});
}
console.log("完成");
console.log("手动执行 ipset save banip");
